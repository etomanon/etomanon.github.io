<!DOCTYPE html>
<html>

<head>
    <title>NDVI change</title>
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initialscale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.2/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.2/leaflet.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.3.0/Chart.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<link href="ndvi.css" rel="stylesheet" />
	

</head>
<body>

			<div id="mapid"></div>
			<div id="pruh1">CHKO Broumovsko<br>NDVI change (2002 x 2009)</div>
			<span id="pruh">NDVI layer transparency</span>
			<input id="opac" type="range" min="0" max="1" value="1" step="0.1" oninput="opacit(this.value)" /><br>
			<div id="leg"><img src="ndvi_legend.png" id="legend"></div>
			<button id="dshp" class="button1" onclick="Lege()">i</button>
			<div id="chartContainer">
			<canvas id="cart">
				</canvas> </div>
			

			<div id="chartContainer1">
			<canvas id="cart1">
				</canvas> </div>
			

			<div id="chartContainer2">
			<canvas id="cart2">
				</canvas> </div>

  <script>
  function Lege() {
    window.open("http://www.eea.europa.eu/data-and-maps/figures/corine-land-cover-2006-by-country/legend/image_large")
	}
		var mymap = L.map('mapid')
		
	
		var opens = L.tileLayer('http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png', {
		maxZoom: 18,
		attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
		})
		
		var goo = L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{
		maxZoom: 20,
		attribution: 'Google',
		subdomains:['mt0','mt1','mt2','mt3']
		})
		
		var corine = L.tileLayer.wms("http://geoportal.gov.cz/ArcGIS/services/CENIA/cenia_corine_2012/MapServer/WMSServer", {
		layers: 'LC.LandCover.CORINE.CLC12_CZ',
		format: 'image/png',
		transparent: true,
		attribution: "Corine Landcover Â© 2012"
		}).addTo(mymap);;
		
		var datas = {
		"type": "FeatureCollection",
		"crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
		"features": [
		{ "type": "Feature", "properties": { "OBJECTID": 185, "TYP": 2, "NAZEV": "Broumovsko", "NAZEV_ASCI": "Broumovsko", "SHAPE_Leng": 103495.421741, "SHAPE_Area": 432250299.21499997 }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 16.112431871665969, 50.659603822885437 ], [ 16.113047300053413, 50.659369760908639 ], [ 16.117208455945178, 50.660231436982059 ], [ 16.125828303333247, 50.660568902364382 ], [ 16.127460321687622, 50.658034897364615 ], [ 16.134240572308077, 50.655980147958445 ], [ 16.139501406157709, 50.650787896114664 ], [ 16.142441166898276, 50.651991820575944 ], [ 16.149171430021454, 50.65297092418708 ], [ 16.169883025558164, 50.644949727941231 ], [ 16.171180297049798, 50.644299271405572 ], [ 16.176424954674307, 50.639556020642807 ], [ 16.179583718291347, 50.633233522417498 ], [ 16.180148808017005, 50.629323358392767 ], [ 16.180983988712487, 50.628633346456006 ], [ 16.182756339875692, 50.62777333141981 ], [ 16.18452978970544, 50.627612200286329 ], [ 16.187550254871422, 50.627593833113202 ], [ 16.194819790815732, 50.630188038499575 ], [ 16.201130056841755, 50.631476026752289 ], [ 16.216843782625595, 50.632967990678033 ], [ 16.217727779187932, 50.633747495207658 ], [ 16.220081475091, 50.636210096203257 ], [ 16.219422560747304, 50.638068154920347 ], [ 16.21967638455218, 50.638538585597573 ], [ 16.220324262054469, 50.639084519805742 ], [ 16.222014423296024, 50.651126780848159 ], [ 16.228251664667351, 50.663996126370172 ], [ 16.230763974955117, 50.668224549035273 ], [ 16.23417060349885, 50.671053446197163 ], [ 16.235018927774302, 50.671305841703678 ], [ 16.23613882131448, 50.671336307239947 ], [ 16.240736682624576, 50.669884174028816 ], [ 16.246615313536431, 50.66985441896486 ], [ 16.257647042421929, 50.667501432143588 ], [ 16.278225556879619, 50.667840756829762 ], [ 16.278918945145499, 50.667307331391662 ], [ 16.282199867537404, 50.662039581435643 ], [ 16.282817665005975, 50.661402682044098 ], [ 16.284124612812974, 50.66111418495754 ], [ 16.292870535339343, 50.66010380839711 ], [ 16.299292885741114, 50.660430184752059 ], [ 16.305035696432281, 50.659850163735243 ], [ 16.306221731328897, 50.659867866841658 ], [ 16.310840322897501, 50.661572732376342 ], [ 16.31469201101681, 50.664151708282425 ], [ 16.31582884247559, 50.664694476431777 ], [ 16.32055212426922, 50.666007354348253 ], [ 16.322110131306225, 50.666054163948282 ], [ 16.32388201409314, 50.665881576070561 ], [ 16.340884566995506, 50.661787805679459 ], [ 16.342135063177214, 50.661366259941296 ], [ 16.342844736546393, 50.660584542100061 ], [ 16.350619771962766, 50.648929438421725 ], [ 16.351653650953189, 50.648350476630227 ], [ 16.356393229641164, 50.646759327163906 ], [ 16.361087661376285, 50.647945878631255 ], [ 16.362468248321843, 50.647785836240196 ], [ 16.363696471100745, 50.647337145671223 ], [ 16.37253332821016, 50.638006353961124 ], [ 16.373309923365909, 50.637607186359986 ], [ 16.377531217955848, 50.636458598377772 ], [ 16.378448595503965, 50.636016867004066 ], [ 16.381094610950591, 50.62998798517917 ], [ 16.392556133141408, 50.620252739957664 ], [ 16.39593041393071, 50.61864054649579 ], [ 16.405082089327809, 50.616958527144924 ], [ 16.412205049378507, 50.610822700342439 ], [ 16.422331654400956, 50.606349827912503 ], [ 16.423369108405566, 50.605722885710101 ], [ 16.427794087137748, 50.600709133608397 ], [ 16.438247588934349, 50.591799700316407 ], [ 16.443725627416566, 50.585085457607576 ], [ 16.444181702829294, 50.580679991463718 ], [ 16.444052632093424, 50.579802625869434 ], [ 16.443269948559223, 50.579257370065712 ], [ 16.437358885535701, 50.576340235946674 ], [ 16.431117642829758, 50.572915686329551 ], [ 16.420774360911473, 50.569119675221621 ], [ 16.406648870397369, 50.568925271656404 ], [ 16.405409928490968, 50.568572527219864 ], [ 16.404127627765725, 50.567639831249828 ], [ 16.404047582035933, 50.566648795207037 ], [ 16.404426112629096, 50.564730872088923 ], [ 16.40989816347221, 50.558182472274346 ], [ 16.410436912025016, 50.550998087790163 ], [ 16.410942921463644, 50.549319583674709 ], [ 16.410765024382265, 50.547966717192374 ], [ 16.408431924878915, 50.547370071569148 ], [ 16.40764491891435, 50.547335069373375 ], [ 16.406945919013364, 50.54702906742331 ], [ 16.406132916314537, 50.547101065795545 ], [ 16.394316391494833, 50.543311027714424 ], [ 16.393491887780609, 50.543355527005524 ], [ 16.38911587583404, 50.542404014279782 ], [ 16.387544867962504, 50.542557010949224 ], [ 16.396695321535532, 50.535438111497029 ], [ 16.400331880646121, 50.530034185143577 ], [ 16.400605726892191, 50.529422118781433 ], [ 16.400532216295211, 50.529066872918357 ], [ 16.399159112477736, 50.527631142039432 ], [ 16.39422297939246, 50.52558213265479 ], [ 16.386390421820529, 50.520546339374732 ], [ 16.374092450538633, 50.516431388745573 ], [ 16.368682965598204, 50.509687854552418 ], [ 16.365751974690383, 50.505680832867661 ], [ 16.364714975736852, 50.504676828203898 ], [ 16.359662149697254, 50.501270010866371 ], [ 16.352439237402205, 50.498781449550215 ], [ 16.348609831546902, 50.498331657308491 ], [ 16.345455622243055, 50.496610388634366 ], [ 16.344642814702908, 50.496421289834061 ], [ 16.335156609969321, 50.500158189291341 ], [ 16.332122129225887, 50.50303495344555 ], [ 16.330882594912538, 50.503709652165114 ], [ 16.320786663004807, 50.507258304009724 ], [ 16.318976550921686, 50.507410898059312 ], [ 16.316318483720018, 50.507255488890088 ], [ 16.312405819940672, 50.506083976382868 ], [ 16.31125192729839, 50.505211098863981 ], [ 16.310756365783124, 50.504523045187483 ], [ 16.310005648371703, 50.500190336631746 ], [ 16.311939652868322, 50.496350775678103 ], [ 16.311928747720668, 50.494674840812728 ], [ 16.311652206058373, 50.493824693057761 ], [ 16.30981723083908, 50.492560840398284 ], [ 16.303641818512492, 50.491005652611811 ], [ 16.302557814384556, 50.491039651870537 ], [ 16.301464977672246, 50.49104093221392 ], [ 16.301104055373504, 50.490894569087232 ], [ 16.30142875100141, 50.488903018142572 ], [ 16.300134827965064, 50.486468629795418 ], [ 16.294579975459655, 50.480542911260706 ], [ 16.293972551998262, 50.480061720598307 ], [ 16.29347672371852, 50.479928062253244 ], [ 16.283911008551097, 50.480292302324649 ], [ 16.27196988123363, 50.483746968016959 ], [ 16.27073882425319, 50.483861575819681 ], [ 16.26998262259524, 50.483356130818386 ], [ 16.269438717817611, 50.482693769968776 ], [ 16.269525074688421, 50.481373806120104 ], [ 16.272795045837007, 50.477294265274494 ], [ 16.2723107599702, 50.476954659924324 ], [ 16.269529267490771, 50.476347529868356 ], [ 16.268330498316132, 50.476427060456665 ], [ 16.2675932002766, 50.47668642023158 ], [ 16.264470575633105, 50.479727313081099 ], [ 16.262231222684076, 50.479943529241787 ], [ 16.258512143954452, 50.479797659401562 ], [ 16.255934713730543, 50.477200506673952 ], [ 16.249994705613442, 50.474150483384939 ], [ 16.249568932645019, 50.472583032807314 ], [ 16.249690791187479, 50.471984868440423 ], [ 16.254870230555579, 50.468122899504593 ], [ 16.254393160084824, 50.467625527546375 ], [ 16.251654750779363, 50.466403458297457 ], [ 16.244477726640479, 50.463873868279705 ], [ 16.243382062179425, 50.463641829018059 ], [ 16.242496322616962, 50.463852669849366 ], [ 16.238406600285472, 50.465433737316111 ], [ 16.231764679116129, 50.466160417134184 ], [ 16.228565464420992, 50.467701214137271 ], [ 16.227424967642158, 50.468325650823225 ], [ 16.222736905156214, 50.468583114699946 ], [ 16.218391896849024, 50.471499480418593 ], [ 16.210915080920785, 50.473710631467021 ], [ 16.209368383216528, 50.474469217201751 ], [ 16.206695062075404, 50.475405503103119 ], [ 16.203143425562036, 50.475609829049624 ], [ 16.200625676959447, 50.477259760400877 ], [ 16.198247766464235, 50.477678543623391 ], [ 16.191725553061261, 50.479336259136005 ], [ 16.182354256835819, 50.480045209380627 ], [ 16.182152958437833, 50.478391640455023 ], [ 16.180319099993966, 50.478186201224005 ], [ 16.179366619353846, 50.47832804616921 ], [ 16.178731761474474, 50.479190554377624 ], [ 16.176743282210865, 50.480297654829613 ], [ 16.170240305491717, 50.480858945813068 ], [ 16.167125038956719, 50.480388365153416 ], [ 16.162109878644106, 50.481212732812686 ], [ 16.161317714803616, 50.481281417572831 ], [ 16.152846011766616, 50.482329237279593 ], [ 16.151954097733412, 50.482607100160124 ], [ 16.150244384636672, 50.483500494611299 ], [ 16.143571394945475, 50.484609464690742 ], [ 16.137932570695074, 50.486661129118524 ], [ 16.129972208618344, 50.489720064212037 ], [ 16.125317242597642, 50.491722465427067 ], [ 16.123881583459205, 50.492298706146343 ], [ 16.127017125120105, 50.494220586625651 ], [ 16.125887591889004, 50.496153884227361 ], [ 16.126022495555571, 50.497712004317492 ], [ 16.123153244110885, 50.500768808719378 ], [ 16.117794444768307, 50.50451230039404 ], [ 16.11460472813102, 50.505449075030029 ], [ 16.112919142660949, 50.506969473718883 ], [ 16.094657790310411, 50.518551141785558 ], [ 16.093931573444948, 50.519328314697795 ], [ 16.092524931114951, 50.522797883448668 ], [ 16.091607556366615, 50.523269023053167 ], [ 16.088539101064761, 50.524383887765659 ], [ 16.089575830646861, 50.52708708633314 ], [ 16.088089921876517, 50.530452623278492 ], [ 16.088854276174644, 50.534942594768495 ], [ 16.08789831204361, 50.53664251065242 ], [ 16.085279669946189, 50.538137471725861 ], [ 16.084116690944217, 50.53836241916737 ], [ 16.07440744845054, 50.539275227226376 ], [ 16.067640797092707, 50.542285911414361 ], [ 16.054049329098952, 50.548540581084964 ], [ 16.041056755853003, 50.552645894439124 ], [ 16.038713438090358, 50.553312867213805 ], [ 16.037527001772904, 50.553653309193507 ], [ 16.032607586926311, 50.558584518134133 ], [ 16.032564133375409, 50.55906273385451 ], [ 16.032931653643097, 50.560048738193707 ], [ 16.033744289906359, 50.56087983588484 ], [ 16.036858539029474, 50.562216069887633 ], [ 16.0379338688697, 50.562530438802405 ], [ 16.044002767010422, 50.561661432046058 ], [ 16.054163113056337, 50.562711107668662 ], [ 16.061435033432726, 50.560404951823742 ], [ 16.064038544518549, 50.557810828882452 ], [ 16.064714370777903, 50.557251742011111 ], [ 16.07009002395937, 50.554534339509061 ], [ 16.077020811343594, 50.555907824485502 ], [ 16.078112733580184, 50.555831821868061 ], [ 16.082467315490472, 50.555542459404194 ], [ 16.082851689832228, 50.555643183977267 ], [ 16.083485999085696, 50.556151355432348 ], [ 16.075883529715004, 50.559103592139941 ], [ 16.076153863018018, 50.559684516772691 ], [ 16.076756031486219, 50.560697457538751 ], [ 16.076617603545834, 50.561193522974037 ], [ 16.069898289625431, 50.569067305926922 ], [ 16.069915942697598, 50.571177731300303 ], [ 16.073133066337572, 50.572199883785572 ], [ 16.070870251460452, 50.572327766930229 ], [ 16.057381411019751, 50.57695588881213 ], [ 16.054665162337159, 50.578611825178363 ], [ 16.051796122794897, 50.586495254551089 ], [ 16.051837053047933, 50.587264909648724 ], [ 16.052562751717186, 50.58943851508112 ], [ 16.049758079225313, 50.595400947768638 ], [ 16.049026372384454, 50.596005128382188 ], [ 16.045482159618278, 50.598173705228945 ], [ 16.049575865890212, 50.599189679953383 ], [ 16.04958261618151, 50.599472055758241 ], [ 16.048918054851786, 50.600256962619909 ], [ 16.049666686573286, 50.602218889411375 ], [ 16.050249850805358, 50.602343774977705 ], [ 16.051999446178918, 50.602255197090848 ], [ 16.05267644172163, 50.602411791328478 ], [ 16.056153447097714, 50.605012540329156 ], [ 16.057078052855086, 50.606128721953894 ], [ 16.056090308679003, 50.609706573715208 ], [ 16.057980315999483, 50.613026346612237 ], [ 16.057916108917162, 50.618097436172341 ], [ 16.062440330782561, 50.631011063269163 ], [ 16.067516114577458, 50.638783971458594 ], [ 16.06864899076546, 50.639535868823067 ], [ 16.084373508565115, 50.647188883261471 ], [ 16.089121289189251, 50.652070516026548 ], [ 16.094417772985661, 50.653370934866494 ], [ 16.097289227360445, 50.655044822983371 ], [ 16.100904775262208, 50.662148101596323 ], [ 16.101620975720603, 50.662567890408745 ], [ 16.102886990902057, 50.662928428588316 ], [ 16.103763325588808, 50.662832485118706 ], [ 16.104952218531945, 50.662441865860806 ], [ 16.109655038537628, 50.661347414827397 ], [ 16.112431871665969, 50.659603822885437 ] ] ] } }
		]
		}


		
		var gj = L.geoJson(datas, {
		style: {
		fillColor: "#ff7800",
		color: "#fff",
		weight: 3,
		opacity: 0,
		fillOpacity: 0
		}}).addTo(mymap);
		mymap.fitBounds(gj.getBounds());

		var imageBounds1 = [[50.4455562602026, 16.0107097887538], [50.6917997995941, 16.4710668144399]];
		var imageBounds = [[50.4503372371785, 16.0159579072404], [50.6868941759074, 16.4635884133171]];
		
		var imag = L.imageOverlay('ndvi.png', imageBounds).addTo(mymap);
		var imag1 = L.imageOverlay('ndvi1.png', imageBounds);
		var imag2 = L.imageOverlay('ndvi2.png', imageBounds);
		var imag3 = L.imageOverlay('ndvi_2002.png', imageBounds1);
		var imag4 = L.imageOverlay('ndvi_2009.png', imageBounds);
		
		
		var baseLayers = {
		"OpenStreetMap": opens,
		"Google Satellite" : goo,
		"Land Cover 2012" : corine
		};

		var overlays = {
			"NDVI": imag,
			"NDVI classified": imag1,
			"NDVI filtered": imag2,
			"NDVI 2002": imag3,
			"NDVI 2009": imag4
		};

		L.control.layers(baseLayers, overlays).addTo(mymap);
		function opacit(opacval) {
		imag.setOpacity(opacval);
		imag1.setOpacity(opacval);
		imag2.setOpacity(opacval);
		imag3.setOpacity(opacval);
		imag4.setOpacity(opacval);
};
	L.control.scale({imperial: false}).addTo(mymap)
	</script>
	
<script src="chart.js"></script>
</body>




</html>